(()=>{var e={};e.id=618,e.ids=[618],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2482:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>h,pages:()=>o,routeModule:()=>p,tree:()=>c}),r(97158),r(88834),r(41611),r(35866),r(32029);var i=r(23191),s=r(88716),a=r(37922),n=r.n(a),l=r(95231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(t,d);let c=["",{children:["(main)",{children:["app",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,97158)),"/Users/kamakaku/_desiqn/__wachboard/src/app/(main)/app/settings/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,88834)),"/Users/kamakaku/_desiqn/__wachboard/src/app/(main)/app/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,41611)),"/Users/kamakaku/_desiqn/__wachboard/src/app/(main)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,32029)),"/Users/kamakaku/_desiqn/__wachboard/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/kamakaku/_desiqn/__wachboard/src/app/(main)/app/settings/page.tsx"],h="/(main)/app/settings/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new i.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(main)/app/settings/page",pathname:"/app/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},69183:(e,t,r)=>{let i={"2e124e30c7c31a4bfdd0cb39a66624d7bea23a7e":()=>Promise.resolve().then(r.bind(r,73671)).then(e=>e.updateShiftTemplate),"34f87cb5195f8c989918acee1b41f961467a3a2d":()=>Promise.resolve().then(r.bind(r,73671)).then(e=>e.updateScheduleCycle),acb41ad9dbf615412596f4c67fc7f1639b432943:()=>Promise.resolve().then(r.bind(r,73671)).then(e=>e.deleteShiftTemplate),c9b665abc2b1c253c76f586f333e66c9e5020c79:()=>Promise.resolve().then(r.bind(r,73671)).then(e=>e.createShiftTemplate),"0678a1bc3aba8e1ffb7bb09a9ae858efc92a063d":()=>Promise.resolve().then(r.bind(r,85243)).then(e=>e.updateStationSettings)};async function s(e,...t){return(await i[e]()).apply(null,t)}e.exports={"2e124e30c7c31a4bfdd0cb39a66624d7bea23a7e":s.bind(null,"2e124e30c7c31a4bfdd0cb39a66624d7bea23a7e"),"34f87cb5195f8c989918acee1b41f961467a3a2d":s.bind(null,"34f87cb5195f8c989918acee1b41f961467a3a2d"),acb41ad9dbf615412596f4c67fc7f1639b432943:s.bind(null,"acb41ad9dbf615412596f4c67fc7f1639b432943"),c9b665abc2b1c253c76f586f333e66c9e5020c79:s.bind(null,"c9b665abc2b1c253c76f586f333e66c9e5020c79"),"0678a1bc3aba8e1ffb7bb09a9ae858efc92a063d":s.bind(null,"0678a1bc3aba8e1ffb7bb09a9ae858efc92a063d")}},85919:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,79404,23)),Promise.resolve().then(r.bind(r,44572)),Promise.resolve().then(r.bind(r,22092))},98091:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});let i=(0,r(62881).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},44572:(e,t,r)=>{"use strict";r.d(t,{ShiftTemplateManager:()=>j});var i=r(10326),s=r(17577),a=r(91664),n=r(29752),l=r(24118),d=r(41190),c=r(44794),o=r(41156),h=r(62881);let m=(0,h.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),p=(0,h.Z)("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var u=r(98091);r(15424);var g=r(46242);(0,g.$)("34f87cb5195f8c989918acee1b41f961467a3a2d");var x=(0,g.$)("c9b665abc2b1c253c76f586f333e66c9e5020c79"),f=(0,g.$)("2e124e30c7c31a4bfdd0cb39a66624d7bea23a7e"),b=(0,g.$)("acb41ad9dbf615412596f4c67fc7f1639b432943");function j({templates:e}){let[t,r]=(0,s.useState)(null),[h,g]=(0,s.useState)(!1),[j,_]=(0,s.useState)(!1),[v,y]=(0,s.useState)(!1),[N,S]=(0,s.useState)(null),w=e=>{r(e),_(!0)},k=e=>{S(e),y(!0)};return(0,i.jsxs)(n.Zb,{children:[i.jsx(n.Ol,{children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx(n.ll,{children:"Schicht-Vorlagen"}),i.jsx(n.SZ,{children:"Erstellen und verwalten Sie Ihre Schicht-Vorlagen"})]}),(0,i.jsxs)(l.Dialog,{open:h,onOpenChange:g,children:[i.jsx(l.DialogTrigger,{asChild:!0,children:(0,i.jsxs)(a.z,{children:[i.jsx(m,{className:"h-4 w-4 mr-2"}),"Neue Schicht"]})}),(0,i.jsxs)(l.DialogContent,{children:[(0,i.jsxs)(l.DialogHeader,{children:[i.jsx(l.DialogTitle,{children:"Neue Schicht erstellen"}),i.jsx(l.DialogDescription,{children:"Erstellen Sie eine neue Schicht-Vorlage"})]}),(0,i.jsxs)("form",{action:x,className:"space-y-4",children:[(0,i.jsxs)("div",{className:"grid gap-2",children:[i.jsx(c.Label,{htmlFor:"create-label",children:"Name *"}),i.jsx(d.I,{id:"create-label",name:"label",placeholder:"z.B. Tagesdienst, Nachtdienst",required:!0})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"grid gap-2",children:[i.jsx(c.Label,{htmlFor:"create-start",children:"Beginn *"}),i.jsx(d.I,{id:"create-start",name:"start_time",type:"time",required:!0})]}),(0,i.jsxs)("div",{className:"grid gap-2",children:[i.jsx(c.Label,{htmlFor:"create-end",children:"Ende *"}),i.jsx(d.I,{id:"create-end",name:"end_time",type:"time",required:!0})]})]}),(0,i.jsxs)("div",{className:"flex gap-2 justify-end",children:[i.jsx(a.z,{type:"button",variant:"outline",onClick:()=>g(!1),children:"Abbrechen"}),i.jsx(a.z,{type:"submit",children:"Erstellen"})]})]})]})]})]})}),i.jsx(n.aY,{children:0===e.length?(0,i.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[i.jsx("p",{children:"Keine Schicht-Vorlagen vorhanden."}),i.jsx("p",{className:"text-sm mt-2",children:"Erstellen Sie Ihre erste Schicht-Vorlage."})]}):(0,i.jsxs)(o.iA,{children:[i.jsx(o.xD,{children:(0,i.jsxs)(o.SC,{children:[i.jsx(o.ss,{children:"Name"}),i.jsx(o.ss,{children:"Beginn"}),i.jsx(o.ss,{children:"Ende"}),i.jsx(o.ss,{className:"w-[100px]",children:"Aktionen"})]})}),i.jsx(o.RM,{children:e.map(e=>(0,i.jsxs)(o.SC,{children:[i.jsx(o.pj,{className:"font-medium",children:e.label}),i.jsx(o.pj,{children:e.start_time}),i.jsx(o.pj,{children:e.end_time}),i.jsx(o.pj,{children:(0,i.jsxs)("div",{className:"flex gap-2",children:[i.jsx(a.z,{variant:"ghost",size:"sm",onClick:()=>w(e),children:i.jsx(p,{className:"h-4 w-4"})}),i.jsx(a.z,{variant:"ghost",size:"sm",onClick:()=>k(e),children:i.jsx(u.Z,{className:"h-4 w-4 text-destructive"})})]})})]},e.id))})]})}),i.jsx(l.Dialog,{open:j,onOpenChange:_,children:(0,i.jsxs)(l.DialogContent,{children:[(0,i.jsxs)(l.DialogHeader,{children:[i.jsx(l.DialogTitle,{children:"Schicht bearbeiten"}),i.jsx(l.DialogDescription,{children:"Bearbeiten Sie die Schicht-Vorlage"})]}),t&&(0,i.jsxs)("form",{action:f,className:"space-y-4",children:[i.jsx("input",{type:"hidden",name:"id",value:t.id}),(0,i.jsxs)("div",{className:"grid gap-2",children:[i.jsx(c.Label,{htmlFor:"edit-label",children:"Name *"}),i.jsx(d.I,{id:"edit-label",name:"label",defaultValue:t.label,required:!0})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"grid gap-2",children:[i.jsx(c.Label,{htmlFor:"edit-start",children:"Beginn *"}),i.jsx(d.I,{id:"edit-start",name:"start_time",type:"time",defaultValue:t.start_time,required:!0})]}),(0,i.jsxs)("div",{className:"grid gap-2",children:[i.jsx(c.Label,{htmlFor:"edit-end",children:"Ende *"}),i.jsx(d.I,{id:"edit-end",name:"end_time",type:"time",defaultValue:t.end_time,required:!0})]})]}),(0,i.jsxs)("div",{className:"flex gap-2 justify-end",children:[i.jsx(a.z,{type:"button",variant:"outline",onClick:()=>_(!1),children:"Abbrechen"}),i.jsx(a.z,{type:"submit",children:"Speichern"})]})]})]})}),i.jsx(l.Dialog,{open:v,onOpenChange:y,children:(0,i.jsxs)(l.DialogContent,{children:[(0,i.jsxs)(l.DialogHeader,{children:[i.jsx(l.DialogTitle,{children:"Schicht l\xf6schen"}),i.jsx(l.DialogDescription,{children:"Sind Sie sicher, dass Sie diese Schicht-Vorlage l\xf6schen m\xf6chten?"})]}),N&&(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"p-4 bg-muted rounded-lg",children:[i.jsx("p",{className:"font-medium",children:N.label}),(0,i.jsxs)("p",{className:"text-sm text-muted-foreground",children:[N.start_time," - ",N.end_time]})]}),(0,i.jsxs)("form",{action:b,className:"flex gap-2 justify-end",children:[i.jsx("input",{type:"hidden",name:"id",value:N.id}),i.jsx(a.z,{type:"button",variant:"outline",onClick:()=>y(!1),children:"Abbrechen"}),i.jsx(a.z,{type:"submit",variant:"destructive",children:"L\xf6schen"})]})]})]})})]})}},22092:(e,t,r)=>{"use strict";r.d(t,{StationSettingsForm:()=>o});var i=r(10326),s=r(17577),a=r(91664),n=r(41190),l=r(44794),d=r(46226);r(15424);var c=(0,r(46242).$)("0678a1bc3aba8e1ffb7bb09a9ae858efc92a063d");function o({stationId:e,currentName:t,currentCrestUrl:r}){let[o,h]=(0,s.useState)(t),[m,p]=(0,s.useState)(r),[u,g]=(0,s.useState)(!1),x=async e=>{e.preventDefault(),g(!0);let t=new FormData(e.currentTarget);await c(t)};return(0,i.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[i.jsx("input",{type:"hidden",name:"station_id",value:e}),(0,i.jsxs)("div",{children:[i.jsx(l.Label,{htmlFor:"name",children:"Name der Wache"}),i.jsx(n.I,{id:"name",name:"name",type:"text",value:o,onChange:e=>h(e.target.value),required:!0,className:"max-w-md"})]}),(0,i.jsxs)("div",{children:[i.jsx(l.Label,{htmlFor:"crest_image",children:"Wappen / Logo"}),(0,i.jsxs)("div",{className:"mt-2 space-y-4",children:[m&&i.jsx("div",{className:"border rounded p-4 inline-block bg-gray-50",children:i.jsx(d.default,{src:m,alt:"Wappen Vorschau",width:120,height:120,className:"object-contain"})}),(0,i.jsxs)("div",{children:[i.jsx(n.I,{id:"crest_image",name:"crest_image",type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(t){let e=new FileReader;e.onloadend=()=>{p(e.result)},e.readAsDataURL(t)}},className:"max-w-md"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Unterst\xfctzte Formate: PNG, JPG, SVG. Empfohlene Gr\xf6\xdfe: 512x512 Pixel"})]})]})]}),i.jsx(a.z,{type:"submit",disabled:u,children:u?"Wird gespeichert...":"\xc4nderungen speichern"})]})}},97158:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var i=r(19510),s=r(27039),a=r(93804),n=r(65655),l=r(58585),d=r(68570);let c=(0,d.createProxy)(String.raw`/Users/kamakaku/_desiqn/__wachboard/src/components/admin/shift-template-manager.tsx#ShiftTemplateManager`),o=(0,d.createProxy)(String.raw`/Users/kamakaku/_desiqn/__wachboard/src/components/admin/station-settings-form.tsx#StationSettingsForm`);var h=r(57371);let m=(0,r(27162).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);async function p({searchParams:e}){let t=(0,n.e)(),{data:{user:r}}=await t.auth.getUser();r||(0,l.redirect)("/login");let{data:d}=await t.from("memberships").select("station_id, role").eq("user_id",r.id).single();if(!d||"ADMIN"!==d.role)return i.jsx("div",{className:"py-8 px-6",children:(0,i.jsxs)(a.Zb,{className:"border-destructive",children:[i.jsx(a.Ol,{children:i.jsx(a.ll,{children:"Zugriff verweigert"})}),i.jsx(a.aY,{children:i.jsx("p",{children:"Sie ben\xf6tigen Administrator-Rechte."})})]})});let{data:p}=await t.from("shift_templates").select("*").eq("station_id",d.station_id).order("label",{ascending:!0}),{data:u}=await t.from("stations").select("id, name, crest_url").eq("id",d.station_id).single();return(0,i.jsxs)("div",{className:"py-8 px-6",children:[(0,i.jsxs)("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Einstellungen"}),i.jsx("p",{className:"text-muted-foreground",children:"Verwalten Sie Ihre Wache und Schicht-Vorlagen"})]}),e.error&&i.jsx(a.Zb,{className:"mb-6 border-destructive",children:i.jsx(a.aY,{className:"pt-6",children:(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[i.jsx(m,{className:"h-5 w-5 text-destructive mt-0.5"}),(0,i.jsxs)("div",{className:"flex-1",children:[i.jsx("p",{className:"text-destructive",children:e.error}),e.error.includes("Fehler beim Erstellen")&&i.jsx("div",{className:"mt-3",children:i.jsx(h.default,{href:"/admin/settings/migrate",children:i.jsx(s.z,{variant:"outline",size:"sm",children:"Migration durchf\xfchren"})})})]})]})})}),e.success&&i.jsx(a.Zb,{className:"mb-6 border-green-500",children:i.jsx(a.aY,{className:"pt-6",children:i.jsx("p",{className:"text-green-600",children:e.success})})}),(0,i.jsxs)(a.Zb,{className:"mb-6",children:[(0,i.jsxs)(a.Ol,{children:[i.jsx(a.ll,{children:"Wache-Einstellungen"}),i.jsx(a.SZ,{children:"Grundlegende Informationen zu Ihrer Wache"})]}),i.jsx(a.aY,{children:i.jsx(o,{stationId:u?.id||"",currentName:u?.name||"",currentCrestUrl:u?.crest_url||null})})]}),i.jsx(c,{templates:p||[]})]})}},73671:(e,t,r)=>{"use strict";r.r(t),r.d(t,{createShiftTemplate:()=>l,deleteShiftTemplate:()=>c,updateScheduleCycle:()=>o,updateShiftTemplate:()=>d});var i=r(27745);r(26461);var s=r(71870),a=r(30207),n=r(74739);async function l(e){let t=(0,s.e)(),{data:{user:r}}=await t.auth.getUser();if(!r)throw Error("User not authenticated.");let i=e.get("label")?.trim(),l=e.get("start_time"),d=e.get("end_time");if(!i||!l||!d)return(0,n.redirect)("/app/settings?error=Alle Felder sind erforderlich.");let{data:c}=await t.from("memberships").select("station_id, role").eq("user_id",r.id).single();if(!c||"ADMIN"!==c.role)return(0,n.redirect)("/app/settings?error=Keine Berechtigung.");let{error:o}=await t.from("shift_templates").insert({station_id:c.station_id,label:i,start_time:l,end_time:d});if(o)return(console.error("Error creating shift template:",o),"23505"===o.code)?(0,n.redirect)(`/app/settings?error=${encodeURIComponent("Eine Schicht mit diesem Namen existiert bereits.")}`):(0,n.redirect)(`/app/settings?error=${encodeURIComponent("Fehler beim Erstellen der Schicht.")}`);(0,a.revalidatePath)("/app/settings"),(0,n.redirect)("/app/settings?success=Schicht erfolgreich erstellt.")}async function d(e){let t=(0,s.e)(),{data:{user:r}}=await t.auth.getUser();if(!r)throw Error("User not authenticated.");let i=e.get("id"),l=e.get("label")?.trim(),d=e.get("start_time"),c=e.get("end_time");if(!i||!l||!d||!c)return(0,n.redirect)("/app/settings?error=Alle Felder sind erforderlich.");let{data:o}=await t.from("memberships").select("station_id, role").eq("user_id",r.id).single();if(!o||"ADMIN"!==o.role)return(0,n.redirect)("/app/settings?error=Keine Berechtigung.");let{error:h}=await t.from("shift_templates").update({label:l,start_time:d,end_time:c}).eq("id",i).eq("station_id",o.station_id);if(h)return(console.error("Error updating shift template:",h),"23505"===h.code)?(0,n.redirect)(`/app/settings?error=${encodeURIComponent("Eine Schicht mit diesem Namen existiert bereits.")}`):(0,n.redirect)(`/app/settings?error=${encodeURIComponent("Fehler beim Aktualisieren der Schicht.")}`);(0,a.revalidatePath)("/app/settings"),(0,n.redirect)("/app/settings?success=Schicht erfolgreich aktualisiert.")}async function c(e){let t=(0,s.e)(),{data:{user:r}}=await t.auth.getUser();if(!r)throw Error("User not authenticated.");let i=e.get("id");if(!i)return(0,n.redirect)("/app/settings?error=Schicht-ID fehlt.");let{data:l}=await t.from("memberships").select("station_id, role").eq("user_id",r.id).single();if(!l||"ADMIN"!==l.role)return(0,n.redirect)("/app/settings?error=Keine Berechtigung.");let{error:d}=await t.from("shift_templates").delete().eq("id",i).eq("station_id",l.station_id);if(d)return console.error("Error deleting shift template:",d),(0,n.redirect)(`/app/settings?error=${encodeURIComponent("Fehler beim L\xf6schen der Schicht.")}`);(0,a.revalidatePath)("/app/settings"),(0,n.redirect)("/app/settings?success=Schicht erfolgreich gel\xf6scht.")}async function o(e){let t;let r=(0,s.e)(),{data:{user:i}}=await r.auth.getUser();if(!i)throw Error("User not authenticated.");let l=e.get("start_date"),d=parseInt(e.get("switch_hours")),c=e.getAll("division_ids");if(!l||!d||0===c.length)return(0,n.redirect)("/app/settings?error=Alle Felder sind erforderlich.");let{data:o}=await r.from("memberships").select("station_id, role").eq("user_id",i.id).single();if(!o||"ADMIN"!==o.role)return(0,n.redirect)("/app/settings?error=Keine Berechtigung.");let{data:h,error:m}=await r.from("divisions").select("id").eq("station_id",o.station_id).in("id",c);if(m||!h||h.length!==c.length)return(0,n.redirect)("/app/settings?error=Ung\xfcltige Divisionen ausgew\xe4hlt.");let{data:p}=await r.from("schedule_cycles").select("id").eq("station_id",o.station_id).single();if(t=p?(await r.from("schedule_cycles").update({start_date:l,switch_hours:d,order_division_ids:c}).eq("station_id",o.station_id)).error:(await r.from("schedule_cycles").insert({station_id:o.station_id,start_date:l,switch_hours:d,order_division_ids:c})).error)return console.error("Error updating schedule cycle:",t),(0,n.redirect)(`/app/settings?error=${encodeURIComponent("Fehler beim Speichern des Zyklus.")}`);(0,a.revalidatePath)("/app/settings"),(0,n.redirect)("/app/settings?success=Schicht-Zyklus erfolgreich gespeichert.")}(0,r(85723).h)([l,d,c,o]),(0,i.j)("c9b665abc2b1c253c76f586f333e66c9e5020c79",l),(0,i.j)("2e124e30c7c31a4bfdd0cb39a66624d7bea23a7e",d),(0,i.j)("acb41ad9dbf615412596f4c67fc7f1639b432943",c),(0,i.j)("34f87cb5195f8c989918acee1b41f961467a3a2d",o)},85243:(e,t,r)=>{"use strict";r.r(t),r.d(t,{updateStationSettings:()=>l});var i=r(27745);r(26461);var s=r(71870),a=r(30207),n=r(74739);async function l(e){let t=(0,s.e)(),{data:{user:r}}=await t.auth.getUser();if(!r)throw Error("User not authenticated.");let i=e.get("station_id"),l=e.get("name"),d=e.get("crest_image");if(!i||!l)return(0,n.redirect)("/app/settings?error=Name ist erforderlich.");let{data:c}=await t.from("memberships").select("station_id, role").eq("user_id",r.id).single();if(!c||"ADMIN"!==c.role||c.station_id!==i)return(0,n.redirect)("/app/settings?error=Keine Berechtigung.");let o=null;if(d&&d.size>0){let e=d.name.split(".").pop(),r=`${i}/crest.${e}`,{data:s,error:a}=await t.storage.from("station-assets").upload(r,d,{upsert:!0,contentType:d.type});if(a)return console.error("Upload error:",a),(0,n.redirect)(`/app/settings?error=${encodeURIComponent("Fehler beim Hochladen des Bildes: "+a.message)}`);let{data:{publicUrl:l}}=t.storage.from("station-assets").getPublicUrl(r);o=l}let h={name:l};o&&(h.crest_url=o);let{error:m}=await t.from("stations").update(h).eq("id",i);if(m)return console.error("Update error:",m),(0,n.redirect)(`/app/settings?error=${encodeURIComponent("Fehler beim Aktualisieren: "+m.message)}`);(0,a.revalidatePath)("/app/settings"),(0,a.revalidatePath)(`/display/${i}`),(0,n.redirect)("/app/settings?success=Einstellungen erfolgreich aktualisiert.")}(0,r(85723).h)([l]),(0,i.j)("0678a1bc3aba8e1ffb7bb09a9ae858efc92a063d",l)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[276,374,702,582,559,369,4,744,226,52,863,384],()=>r(2482));module.exports=i})();