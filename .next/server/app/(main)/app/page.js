(()=>{var e={};e.id=812,e.ids=[812],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},47024:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>o}),t(58642),t(88834),t(41611),t(35866),t(32029);var r=t(23191),a=t(88716),n=t(37922),i=t.n(n),d=t(95231),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);t.d(s,l);let o=["",{children:["(main)",{children:["app",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,58642)),"/Users/kamakaku/_desiqn/__wachboard/src/app/(main)/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,88834)),"/Users/kamakaku/_desiqn/__wachboard/src/app/(main)/app/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,41611)),"/Users/kamakaku/_desiqn/__wachboard/src/app/(main)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,32029)),"/Users/kamakaku/_desiqn/__wachboard/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/kamakaku/_desiqn/__wachboard/src/app/(main)/app/page.tsx"],m="/(main)/app/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(main)/app/page",pathname:"/app",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},54331:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,79404,23))},58642:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var r=t(19510),a=t(66561),n=t(65655),i=t(58585),d=t(57371),l=t(27039),o=t(93804),c=t(75782),m=t(63956);let x=(0,t(27162).Z)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);async function u({searchParams:e}){let s=(0,n.e)(),{data:{user:t}}=await s.auth.getUser();t||(0,i.redirect)("/login");let{data:u}=await s.from("memberships").select("station_id, role").eq("user_id",t.id).single();u||(0,i.redirect)("/onboarding");let{data:h}="ADMIN"===u.role?await s.from("join_requests").select("id, created_at, user:users_profile(id, email, name)").eq("station_id",u.station_id).eq("status","PENDING").order("created_at",{ascending:!1}):{data:[]},{data:p}=await s.from("divisions").select("id, name").eq("station_id",u.station_id).order("name",{ascending:!0});return(0,r.jsxs)("div",{className:"py-8 px-6",children:[(0,r.jsxs)("div",{className:"mb-6 flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold mb-2",children:["Dashboard","ADMIN"===u.role&&r.jsx("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:"(Administrator)"}),"EDITOR"===u.role&&r.jsx("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:"(Editor)"}),"VIEWER"===u.role&&r.jsx("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:"(Ansicht)"})]}),(0,r.jsxs)("p",{className:"text-muted-foreground",children:["ADMIN"===u.role&&"Verwalten Sie Ihre Wache und delegieren Sie Rollen.","EDITOR"===u.role&&"Verwalten Sie Dienstpl\xe4ne und Personal.","VIEWER"===u.role&&"Ansicht der Wache und Dienstpl\xe4ne."]})]}),r.jsx(d.default,{href:`/display/${u.station_id}`,children:(0,r.jsxs)(l.z,{children:[r.jsx(x,{className:"h-4 w-4 mr-2"}),"Display-Ansicht"]})})]}),e.error&&(0,r.jsxs)(m.bZ,{variant:"destructive",className:"mb-6",children:[r.jsx(m.Cd,{children:"Fehler"}),r.jsx(m.X,{children:e.error})]}),e.success&&(0,r.jsxs)(m.bZ,{className:"mb-6 border-green-500",children:[r.jsx(m.Cd,{children:"Erfolg"}),r.jsx(m.X,{children:e.success})]}),h&&h.length>0&&(0,r.jsxs)(o.Zb,{className:"mb-6",children:[(0,r.jsxs)(o.Ol,{children:[r.jsx(o.ll,{children:"Beitrittsanfragen"}),r.jsx(o.SZ,{children:"Neue Benutzer m\xf6chten Ihrer Wache beitreten."})]}),r.jsx(o.aY,{children:(0,r.jsxs)(c.iA,{children:[r.jsx(c.xD,{children:(0,r.jsxs)(c.SC,{children:[r.jsx(c.ss,{children:"Benutzer"}),r.jsx(c.ss,{children:"Datum"}),r.jsx(c.ss,{className:"text-right",children:"Aktionen"})]})}),r.jsx(c.RM,{children:h.map(e=>(0,r.jsxs)(c.SC,{children:[r.jsx(c.pj,{children:(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium",children:e.user?.name||"Unbekannt"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:e.user?.email})]})}),r.jsx(c.pj,{children:new Date(e.created_at).toLocaleDateString("de-DE")}),r.jsx(c.pj,{className:"text-right",children:(0,r.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,r.jsxs)("form",{action:a.acceptJoinRequest,children:[r.jsx("input",{type:"hidden",name:"requestId",value:e.id}),r.jsx("input",{type:"hidden",name:"role",value:"VIEWER"}),r.jsx(l.z,{type:"submit",size:"sm",variant:"outline",children:"Akzeptieren"})]}),(0,r.jsxs)("form",{action:a.rejectJoinRequest,children:[r.jsx("input",{type:"hidden",name:"requestId",value:e.id}),r.jsx(l.z,{type:"submit",size:"sm",variant:"outline",className:"text-destructive",children:"Ablehnen"})]})]})})]},e.id))})]})})]}),r.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:(0,r.jsxs)(o.Zb,{children:[(0,r.jsxs)(o.Ol,{children:[r.jsx(o.ll,{children:"Statistik"}),r.jsx(o.SZ,{children:"\xdcbersicht \xfcber Ihre Wache"})]}),r.jsx(o.aY,{children:r.jsx("p",{className:"text-muted-foreground text-sm",children:"Statistiken werden hier angezeigt"})})]})})]})}},63956:(e,s,t)=>{"use strict";t.d(s,{Cd:()=>o,X:()=>c,bZ:()=>l});var r=t(19510),a=t(71159),n=t(46145),i=t(40644);let d=(0,n.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=a.forwardRef(({className:e,variant:s,...t},a)=>r.jsx("div",{ref:a,role:"alert",className:(0,i.cn)(d({variant:s}),e),...t}));l.displayName="Alert";let o=a.forwardRef(({className:e,...s},t)=>r.jsx("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",e),...s}));o.displayName="AlertTitle";let c=a.forwardRef(({className:e,...s},t)=>r.jsx("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",e),...s}));c.displayName="AlertDescription"}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,374,702,582,559,369,4,863,698],()=>t(47024));module.exports=r})();