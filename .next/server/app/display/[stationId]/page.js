(()=>{var e={};e.id=88,e.ids=[88],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25049:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>o}),s(60179),s(32029),s(35866);var a=s(23191),r=s(88716),l=s(37922),n=s.n(l),i=s(95231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(t,d);let o=["",{children:["display",{children:["[stationId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,60179)),"/Users/kamakaku/_desiqn/__wachboard/src/app/display/[stationId]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,32029)),"/Users/kamakaku/_desiqn/__wachboard/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/kamakaku/_desiqn/__wachboard/src/app/display/[stationId]/page.tsx"],x="/display/[stationId]/page",p={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/display/[stationId]/page",pathname:"/display/[stationId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},96105:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,12994,23)),Promise.resolve().then(s.t.bind(s,96114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,79671,23)),Promise.resolve().then(s.t.bind(s,41868,23)),Promise.resolve().then(s.t.bind(s,84759,23))},75675:()=>{},21254:(e,t,s)=>{Promise.resolve().then(s.bind(s,30832))},50131:(e,t,s)=>{"use strict";e.exports=s(81616).vendored.contexts.RouterContext},30832:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(10326),r=s(17577),l=s(69701),n=s(29752),i=s(38443),d=s(3594),o=s(46226);function c({params:e}){let{stationId:t}=e;(0,l.e)();let[s,d]=(0,r.useState)([]),[c,p]=(0,r.useState)([]),[h,u]=(0,r.useState)(""),[m,f]=(0,r.useState)(null),[g,b]=(0,r.useState)(new Date),[v,j]=(0,r.useState)(!1),y=s.find(e=>new Date(e.starts_at)<=g&&new Date(e.ends_at)>g),N=s.find(e=>new Date(e.starts_at)>g);return s.length>0&&v&&(console.log("Now:",g.toISOString()),console.log("Shifts:",s.map(e=>({id:e.id,division:e.division.name,starts_at:e.starts_at,ends_at:e.ends_at,isCurrent:new Date(e.starts_at)<=g&&new Date(e.ends_at)>g,isNext:new Date(e.starts_at)>g,startsInPast:new Date(e.starts_at)<=g,endsInFuture:new Date(e.ends_at)>g}))),console.log("Current shift:",y?`${y.division.name} (${y.starts_at} - ${y.ends_at})`:"none"),console.log("Next shift:",N?`${N.division.name} (${N.starts_at} - ${N.ends_at})`:"none")),(0,a.jsxs)("div",{className:"bg-white h-screen overflow-hidden flex flex-col p-2 font-sans",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2 flex-shrink-0 border-b border-gray-300 pb-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[m&&a.jsx(o.default,{src:m,alt:`${h} Wappen`,width:60,height:60,className:"object-contain"}),a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:h||"Lade..."})]}),a.jsx("div",{className:"text-right",children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"text-lg font-bold text-gray-900 tabular-nums",children:[g.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit",second:"2-digit"})," Uhr"]}),a.jsx("p",{className:"text-[10px] text-gray-600",children:g.toLocaleDateString("de-DE",{weekday:"long",day:"2-digit",month:"long",year:"numeric"})})]}):a.jsx("div",{className:"h-8"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 flex-1 overflow-hidden min-h-0",children:[y?(0,a.jsxs)("div",{className:"flex flex-col h-full overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white p-1.5 rounded flex-shrink-0",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx(i.C,{className:"bg-white text-green-700 font-bold text-[9px] px-1.5 py-0.5",children:"AKTUELL"}),a.jsx("h2",{className:"text-base font-bold",children:y.division.name}),(0,a.jsxs)("p",{className:"text-[10px] opacity-90",children:[y.starts_at.split("T")[1].slice(0,5)," - ",y.ends_at.split("T")[1].slice(0,5)]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[y.wachleitung_im_haus&&a.jsx(i.C,{className:"bg-yellow-400 text-yellow-900 font-bold text-xs px-2 py-0.5",children:"WL im Haus"}),(()=>{let e=parseInt(y.starts_at.split("T")[1].slice(0,2));return e>=7&&e<19?a.jsx("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}):a.jsx("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})})()]})]})}),a.jsx("div",{className:"flex-1 flex flex-col gap-5 mt-1 overflow-y-auto",children:c.map(e=>a.jsx(x,{vehicle:e,shift:y},e.key))})]}):a.jsx("div",{className:"flex items-center justify-center",children:a.jsx(n.Zb,{className:"border-2 border-gray-300 bg-gray-50",children:a.jsx(n.aY,{className:"p-12 text-center",children:a.jsx("p",{className:"text-3xl text-gray-500 font-semibold",children:"Keine aktuelle Schicht"})})})}),N?(0,a.jsxs)("div",{className:"flex flex-col h-full overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-1.5 rounded flex-shrink-0",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx(i.C,{className:"bg-white text-blue-700 font-bold text-[9px] px-1.5 py-0.5",children:"N\xc4CHSTE"}),a.jsx("h2",{className:"text-base font-bold",children:N.division.name}),(0,a.jsxs)("p",{className:"text-[10px] opacity-90",children:[N.starts_at.split("T")[1].slice(0,5)," - ",N.ends_at.split("T")[1].slice(0,5)]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[N.wachleitung_im_haus&&a.jsx(i.C,{className:"bg-yellow-400 text-yellow-900 font-bold text-xs px-2 py-0.5",children:"WL im Haus"}),(()=>{let e=parseInt(N.starts_at.split("T")[1].slice(0,2));return e>=7&&e<19?a.jsx("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}):a.jsx("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})})()]})]})}),a.jsx("div",{className:"flex-1 flex flex-col gap-5 mt-1 overflow-y-auto",children:c.map(e=>a.jsx(x,{vehicle:e,shift:N},e.key))})]}):a.jsx("div",{className:"flex items-center justify-center",children:a.jsx(n.Zb,{className:"border-2 border-gray-300 bg-gray-50",children:a.jsx(n.aY,{className:"p-12 text-center",children:a.jsx("p",{className:"text-3xl text-gray-500 font-semibold",children:"Keine n\xe4chste Schicht geplant"})})})})]})]})}function x({vehicle:e,shift:t}){e.config;let s=t.assignments,r=new Map,l=[];s.filter(t=>t.vehicle_key===e.key).forEach(e=>{let t=e.people??null,s=e.slot_key,a={key:s,label:s.includes(":")?s.split(":")[1]:s},n=s.includes("Trupp ")??!1,i=n&&s?s.split(":")[0]:null,d=a.label?.toLowerCase().includes("praktikant")??!1,o=e.from_trupp_key??null,c={slot:a,assignment:e,person:t,isSpecial:"__notarzt__"===s||"__fuehrungsdienst__"===s,isTrupp:n,truppName:i,isPraktikant:d,fromTrupp:o};i?(r.has(i)||r.set(i,[]),r.get(i).push(c)):l.push(c)});let c=[];r.forEach((e,t)=>{let s=e.filter(e=>e.person||e.isPraktikant);s.length>0&&c.push({truppName:t,slots:s})}),l.length>0&&c.push({truppName:null,slots:l});let x=s.filter(t=>t.vehicle_key===e.key&&(t.slot_key?.toLowerCase().includes("praktikant")||t.placeholder_text?.toLowerCase().includes("praktikant"))).length;return a.jsx(n.Zb,{className:"border border-gray-200 bg-white",children:(0,a.jsxs)(n.aY,{className:"p-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[e.image_url&&a.jsx("div",{className:"w-20 h-16 overflow-hidden rounded border border-gray-200 flex-shrink-0",children:a.jsx(o.default,{src:e.image_url,alt:e.title,width:80,height:64,className:"w-full h-full object-contain"})}),a.jsx("h3",{className:"text-base font-bold text-gray-900 flex-1",children:e.title}),x>0&&(0,a.jsxs)(i.C,{className:"bg-green-500 text-white font-bold text-xs px-2 py-0.5",children:[x," PRAKTIKANT",x>1?"EN":""]})]}),a.jsx("div",{className:"grid grid-cols-2 gap-1",children:0===c.length?a.jsx("div",{className:"col-span-2 text-center py-4 text-gray-400 italic text-sm",children:"Keine Personen zugeordnet"}):c.map((e,t)=>{if(e.truppName){let t=e.slots.filter(e=>!e.isPraktikant),s=e.slots.filter(e=>e.isPraktikant),r=s.length>0;return(0,a.jsxs)("div",{className:"col-span-2 bg-blue-50 rounded-md p-1.5 flex items-center gap-2",children:[a.jsx("div",{className:"font-bold text-sm text-blue-700 whitespace-nowrap px-1 flex items-center gap-1",children:e.truppName}),(0,a.jsxs)("div",{className:`flex-1 grid ${r?"grid-cols-7":"grid-cols-2"} gap-1 items-start`,children:[t.map(({slot:e,person:t,fromTrupp:s})=>(0,a.jsxs)("div",{className:`${r?"col-span-3":""} bg-white p-1.5 rounded flex items-center gap-2 ${s?"border border-purple-400":""}`,children:[a.jsx(d.q,{src:t?.photo_url||void 0,name:t?.name||void 0,size:40}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-bold text-[11px] text-gray-900 leading-tight break-words",children:t?.name??"---"}),(0,a.jsxs)("p",{className:"text-[9px] uppercase leading-tight text-blue-600 break-words",children:[e.label,s&&(0,a.jsxs)("span",{className:"text-purple-600",children:[" ← ",s]})]})]})]},e.key)),s.map(({slot:e})=>a.jsx("div",{className:"col-span-1 bg-green-500 text-white p-1.5 rounded flex items-center justify-center min-h-[3.2rem]",children:a.jsx("p",{className:"font-bold text-[9px] text-center leading-tight",children:"+ Praktikant"})},e.key))]})]},e.truppName)}{let s=e.slots.filter(e=>!e.isPraktikant),r=e.slots.filter(e=>e.isPraktikant),l=r.length>0;return(0,a.jsxs)("div",{className:`col-span-2 grid ${l?"grid-cols-7":"grid-cols-2"} gap-1 items-start`,children:[s.map(({slot:e,person:t,isSpecial:s,fromTrupp:r})=>{let n=s?"bg-orange-50 border-l-4 border-orange-500":r?"bg-purple-50 border-l-2 border-purple-400":"bg-gray-50";return(0,a.jsxs)("div",{className:`${l?"col-span-3":""} ${n} p-1.5 rounded flex items-center gap-2 relative`,children:[s&&a.jsx("div",{className:"absolute top-0 right-0 bg-orange-500 text-white text-[8px] font-bold px-1.5 py-0.5 rounded-bl rounded-tr",children:"SPEZIAL"}),a.jsx(d.q,{src:t?.photo_url||void 0,name:t?.name||void 0,size:40}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-bold text-[11px] text-gray-900 leading-tight break-words",children:t?.name??"---"}),(0,a.jsxs)("p",{className:`text-[9px] uppercase leading-tight break-words ${s?"text-orange-700 font-bold":r?"text-purple-700":"text-gray-500"}`,children:[e.label,r&&(0,a.jsxs)("span",{children:[" ← ",r]})]})]})]},e.key)}),r.map(({slot:e})=>a.jsx("div",{className:"col-span-1 bg-green-500 text-white p-1.5 rounded flex items-center justify-center min-h-[3.2rem]",children:a.jsx("p",{className:"font-bold text-[9px] text-center leading-tight",children:"+ Praktikant"})},e.key))]},`individual-${t}`)}})})]})})}},3594:(e,t,s)=>{"use strict";s.d(t,{q:()=>n});var a=s(10326),r=s(46226),l=s(51223);function n({src:e,name:t,size:s=36,className:n}){let i=t?t.split(" ").filter(Boolean).map(e=>e[0]).slice(0,2).join("").toUpperCase():"";return a.jsx("div",{className:(0,l.cn)("relative overflow-hidden rounded-full bg-muted text-muted-foreground/70 flex items-center justify-center border border-border flex-shrink-0",n),style:{width:s,height:s},children:e?a.jsx(r.default,{src:e,alt:t??"Avatar",width:s,height:s,className:"object-cover w-full h-full",unoptimized:!0}):a.jsx("span",{style:{fontSize:.4*s},className:"font-semibold",children:i||"?"})})}},38443:(e,t,s)=>{"use strict";s.d(t,{C:()=>i});var a=s(10326);s(17577);var r=s(79360),l=s(51223);let n=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i({className:e,variant:t,...s}){return a.jsx("div",{className:(0,l.cn)(n({variant:t}),e),...s})}},29752:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>i,SZ:()=>o,Zb:()=>n,aY:()=>c,ll:()=>d});var a=s(10326),r=s(17577),l=s(51223);let n=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));n.displayName="Card";let i=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...t}));i.displayName="CardHeader";let d=r.forwardRef(({className:e,...t},s)=>a.jsx("h3",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));d.displayName="CardTitle";let o=r.forwardRef(({className:e,...t},s)=>a.jsx("p",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",e),...t}));o.displayName="CardDescription";let c=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,l.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent",r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},69701:(e,t,s)=>{"use strict";s.d(t,{e:()=>r});var a=s(66305);function r(){return(0,a.createBrowserClient)("https://ghjfyjximndlrstwridq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdoamZ5anhpbW5kbHJzdHdyaWRxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY5NzczNjgsImV4cCI6MjA4MjU1MzM2OH0.kn8-ZKY2EYmIjm8H3bIiXsMeHHz7355LIdMrgBr4GpQ")}},51223:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var a=s(41135),r=s(31009);function l(...e){return(0,r.m6)((0,a.W)(e))}},60179:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`/Users/kamakaku/_desiqn/__wachboard/src/app/display/[stationId]/page.tsx#default`)},32029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d,metadata:()=>i});var a=s(19510),r=s(38538),l=s.n(r);s(5023);var n=s(40644);let i={title:"Wachboard",description:"Dienst- & Fahrzeugbesetzung f\xfcr Feuerwehren"};function d({children:e}){return a.jsx("html",{lang:"de",suppressHydrationWarning:!0,children:a.jsx("body",{className:(0,n.cn)("min-h-screen bg-background font-sans antialiased",l().variable),children:e})})}},40644:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var a=s(55761),r=s(62386);function l(...e){return(0,r.m6)((0,a.W)(e))}},5023:()=>{},65826:(e,t,s)=>{"use strict";s.d(t,{_T:()=>r,ev:()=>n,mG:()=>l,pi:()=>a});var a=function(){return(a=Object.assign||function(e){for(var t,s=1,a=arguments.length;s<a;s++)for(var r in t=arguments[s])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function r(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)0>t.indexOf(a[r])&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(s[a[r]]=e[a[r]]);return s}function l(e,t,s,a){return new(s||(s=Promise))(function(r,l){function n(e){try{d(a.next(e))}catch(e){l(e)}}function i(e){try{d(a.throw(e))}catch(e){l(e)}}function d(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}d((a=a.apply(e,t||[])).next())})}function n(e,t,s){if(s||2==arguments.length)for(var a,r=0,l=t.length;r<l;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[276,374,582,226,305],()=>s(25049));module.exports=a})();